<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <title>Google Maps JavaScript API v3 Example: Fusion Tables Layer</title>
  <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin:20px; padding:20px; font-family:arial;}
	a {text-decoration:none;}
    #map_canvas { height: 500px; }
	h1, h2, h3, h4, p {margin:0; padding:0;}
	h1 {margin-bottom:20px; padding-bottom:6px; border-bottom: solid 1px #777;}
	h3 {color:#777; font-size:0.9em; font-weight:normal; margin-bottom:6px;}
	#map {}
	#filters {}
	#filters p {line-height:150%;}
	#filters p.notes {color:#777; font-size:0.8em; margin-bottom:5px;}
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDGbEUwknHTaKmEpjwM-fRfJt7zbCZZtCI&sensor=false">
  </script>
  <script type="text/javascript">
  
  var newYork = new google.maps.LatLng(40.76193, -73.97751);
  var newYorkFusionID = "3368106";
  var queryStr = "";
  
     layer = new google.maps.FusionTablesLayer({
      query: {
        select: 'geometry',
        from: "3368106",
		suppressInfoWindows: true
      }
    });
  
  $(document).ready(function () {
	
	$("a#mapchange").click(function(e){
		e.preventDefault();
		aQuery = $(this).attr("rel")
		updateMap(aQuery);
	});
  
  });

  function initialize() {

    

    map = new google.maps.Map(document.getElementById('map_canvas'), {
      center: newYork,
      zoom: 12,
      mapTypeId: 'roadmap'
    });
 
 
    layer.setMap(map);
  }
  
  function updateMap(aQuery){
	
	layer.query.where = aQuery;
	
    layer.setMap(map);
	
  }
  
  </script>
</head>
<body onload="initialize()">
<h3>Where people are staying</h1>
<h1>New York, NY</h1>

	<div>

		<div id="map_canvas" style="width:60%; float:left;"></div>
		<div id= "filters" style="width:38%; float:left;">
			<div style="padding-left:30px;">
				<p style="color:#999;" class="notes" >
					This is a small sample set of data based on bookings in New York from a US POS bookings over a 7 day period
				</p>
				<p style="color:#999;" class="notes">
					Each dot represents a single hotel.
				</p>
				
				<h4 style="margin-top:25px;">Filters</h4>
				<p style="color:#999;" class="notes">
					At this stage the choice and mechanism are for technical proof of concept. I'll work on the type and interaction over the comming days
				</p>
				<p>
					<a id="mapchange" rel="" href="#">Show me everything</a><br />
					<a id="mapchange" rel="'Expedia Half Star Rating' = 6" href="#">Show me nothing</a><br /><br />
					<a id="mapchange" rel="'Expedia Half Star Rating' = 5" href="#">Show me 5 star hotels</a><br />
					<a id="mapchange" rel="'Expedia Half Star Rating' = 4" href="#">Show me 4 star hotels</a><br />
					<a id="mapchange" rel="'Expedia Half Star Rating' = 3" href="#">Show me 3 star hotels</a><br /><br />
					<a id="mapchange" rel="ppn <= 100" href="#">Show me hotels under $100 per night</a><br />
					<a id="mapchange" rel="ppn >= 100 AND ppn <= 200" href="#">Show me hotels under $100 - $200 per night</a><br />
					<a id="mapchange" rel="ppn >= 200 AND ppn <= 300" href="#">Show me hotels under $200 - $300 per night</a><br />
					<a id="mapchange" rel="ppn >= 300 AND ppn <= 400" href="#">Show me hotels under $300 - $400 per night</a><br />
					<a id="mapchange" rel="ppn >= 400 AND ppn <= 500" href="#">Show me hotels under $400 - $500 per night</a><br />
					<a id="mapchange" rel="ppn >= 500" href="#">Show me hotels over $500 per night</a><br />
					<a id="mapchange" rel="ppn >= 500" href="#">Show me hotels over $500 per night</a><br />
				</p>
				
			</div>
		</div>
		
	</div>
</body>
</html>