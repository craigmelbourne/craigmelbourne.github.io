<html><head>
    <title>SQM: Autosuggest on single key press</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1.0, width=320, minimal-ui">
    <link rel="stylesheet" type="text/css" href="http://ux.hotels.com/browseFlow/variant_3/css/reset.css">
  <style>/* Copyright 2014 Evernote Corporation. All rights reserved. */
  body {font-family:arial; background-color: #EAE8E0;}

.widget-autosuggest-options {width:280px; left:100px; border:solid 1px #eee; background-color:#fff;}
.widget-autosuggest-options thead, tfoot {display:none;}
.widget-autosuggest-category {display: none;}


tbody td {padding:4px; font-size:14px; border-bottom:solid 1px #eee; }
tbody td:hover, .tt-suggestion > p:hover {cursor: pointer; background-color:#eee;}
span.highlighted {font-weight:bold;}

.tt-dropdown-menu {background-color:#fff; width:280px; border:solid 1px #eee;}
.tt-suggestion > p {
  display: block;
  padding: 4px;
  border-bottom:solid 1px #eee;
  clear: both;
  font-weight: normal;
  white-space: nowrap;
  margin:0;
  font-size:14px;
}

#desc {display:none;}

@media only screen and (min-width:600px) {
 #wrapper {width:360px; margin:0 auto;}
}

</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://ux.hotels.com/browseFlow/variant_3/js/core/dio.js"></script>
    <script type="text/javascript" src="http://ux.hotels.com/browseFlow/variant_3/js/core/event.js"></script>
    <script type="text/javascript" src="http://ux.hotels.com/browseFlow/variant_3/js/core/polyfills.js"></script>
    <script type="text/javascript" src="http://ux.hotels.com/browseFlow/variant_3/js/core/widget.js"></script>
    <script type="text/javascript" src="http://ux.hotels.com/browseFlow/variant_3/js/prototype/dio.widget.autosuggest.js"></script>
    <script type="text/javascript" src="http://ux.hotels.com/browseFlow/variant_3/js/HotelSearch.js"></script>
    <script type="text/javascript" src="http://ux.hotels.com/browseFlow/variant_3/js/AutoSuggest.js"></script>
    <script type="text/javascript" src="http://ux.hotels.com/browseFlow/variant_3/js/BrowseLocations.js"></script>
  <!-- <script type="text/javascript" src="typeahead.bundle.js"></script> -->


</head>
  <body cz-shortcut-listen="true" class="">
    <section class="overlay">
      <div class="browse_locations">


        <!--<div class="close">
          <a href="#">close</a>
          <p>
            â€¦or type for more destinations
          </p>
        </div>-->

       
      </div>
    </section>


    <div id="wrapper">
      <div id="query" style="width:100%">
        
          <div class="destination" style="padding:16px; background-color:#EAE8E0; display:inline-block">
            <h1 style="font-size:24px; line-height:32px;">Hotel search</h1>
            <input type="text" id="search_destination" class="typeahead" autocorrect="off" autocomplete="off" class="autosuggest-enabled" autofocus style="padding:4px; font-size:14px; width:280px">
            
            <p style="margin-top:8px; font-size:13px;">
              Destination, hotel, landmark or address
            </p>
          <input type="hidden" name="as-shown" value="true"></div>

        
      </article>
      
    
    </section>

    
    <script type="text/javascript">
    $(function(){
     

      AutoSuggest.init();
      
      $("#search_destination").focus()

      $(".widget-autosuggest-options").hide();
      var inputPos = $("#search_destination ").offset();
      console.log(inputPos);
      $(".widget-autosuggest-options").css({
                "position": "absolute",
                "top": (inputPos.top + 20) + "px",
                "left": inputPos.left + "px"
      });

      $('input').keyup(function(){
            console.log($(this).val().length);
            if ($(this).val().length >= 3){
                $(".widget-autosuggest-options").show();
            } else {
                $(".widget-autosuggest-options").hide();
            }
        });

      $(".widget-autosuggest-options").on("click", "tbody td", function(){
        console.log("selected")
        $(".widget-autosuggest-options").hide();
      }); 

      $(document.body).on("click", function(){
        $(".widget-autosuggest-options").hide();
      })
      
    });



     

    </script>
  
</body></html>